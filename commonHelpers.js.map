{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet userSelectedDate;\nlet countdownInterval;\n\nconst options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        userSelectedDate = selectedDates[0];\n        if (userSelectedDate < new Date()) {\n            document.querySelector('[data-start]').disabled = true;\n            iziToast.error({\n                title: 'Error',\n                message: 'Please choose a date in the future',\n            });\n        } else {\n            document.querySelector('[data-start]').disabled = false;\n        }\n    },\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n    const dateTimePicker = flatpickr(\"#datetime-picker\", options);\n\n    document.querySelector(\"#datetime-picker\").addEventListener(\"click\", () => {\n        dateTimePicker.open();\n    });\n\n    document.querySelector('[data-start]').addEventListener('click', startTimer);\n\n    function startTimer() {\n        if (countdownInterval) {\n            clearInterval(countdownInterval);\n        }\n\n        countdownInterval = setInterval(updateTimer, 1000);\n\n        function updateTimer() {\n            const timeRemaining = userSelectedDate - new Date();\n            if (timeRemaining <= 0) {\n                clearInterval(countdownInterval);\n                displayTime({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n                document.querySelector('[data-start]').disabled = true;\n            } else {\n                const formattedTime = convertMs(timeRemaining);\n                displayTime(formattedTime);\n            }\n        }\n\n        function displayTime({ days, hours, minutes, seconds }) {\n            document.querySelector('[data-days]').textContent = addLeadingZero(days);\n            document.querySelector('[data-hours]').textContent = addLeadingZero(hours);\n            document.querySelector('[data-minutes]').textContent = addLeadingZero(minutes);\n            document.querySelector('[data-seconds]').textContent = addLeadingZero(seconds);\n        }\n    }\n\n    function convertMs(ms) {\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n\n        const days = Math.floor(ms / day);\n        const hours = Math.floor((ms % day) / hour);\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n        return {\n            days: addLeadingZero(days),\n            hours: addLeadingZero(hours),\n            minutes: addLeadingZero(minutes),\n            seconds: addLeadingZero(seconds)\n        };\n    }\n\n    function addLeadingZero(value) {\n        const stringValue = value.toString();\n        return stringValue.length === 1 ? `0${stringValue}` : stringValue;\n    }\n});\n"],"names":["userSelectedDate","countdownInterval","options","selectedDates","iziToast","dateTimePicker","flatpickr","startTimer","updateTimer","timeRemaining","displayTime","formattedTime","convertMs","days","hours","minutes","seconds","addLeadingZero","ms","value","stringValue"],"mappings":"+IAKA,IAAIA,EACAC,EAEJ,MAAMC,EAAU,CACZ,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACnBH,EAAmBG,EAAc,GAC7BH,EAAmB,IAAI,MACvB,SAAS,cAAc,cAAc,EAAE,SAAW,GAClDI,EAAS,MAAM,CACX,MAAO,QACP,QAAS,oCACzB,CAAa,GAED,SAAS,cAAc,cAAc,EAAE,SAAW,EAEzD,CACL,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACtD,MAAMC,EAAiBC,EAAU,mBAAoBJ,CAAO,EAE5D,SAAS,cAAc,kBAAkB,EAAE,iBAAiB,QAAS,IAAM,CACvEG,EAAe,KAAI,CAC3B,CAAK,EAED,SAAS,cAAc,cAAc,EAAE,iBAAiB,QAASE,CAAU,EAE3E,SAASA,GAAa,CACdN,GACA,cAAcA,CAAiB,EAGnCA,EAAoB,YAAYO,EAAa,GAAI,EAEjD,SAASA,GAAc,CACnB,MAAMC,EAAgBT,EAAmB,IAAI,KAC7C,GAAIS,GAAiB,EACjB,cAAcR,CAAiB,EAC/BS,EAAY,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EACzD,SAAS,cAAc,cAAc,EAAE,SAAW,OAC/C,CACH,MAAMC,EAAgBC,EAAUH,CAAa,EAC7CC,EAAYC,CAAa,CAC5B,CACJ,CAED,SAASD,EAAY,CAAE,KAAAG,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACpD,SAAS,cAAc,aAAa,EAAE,YAAcC,EAAeJ,CAAI,EACvE,SAAS,cAAc,cAAc,EAAE,YAAcI,EAAeH,CAAK,EACzE,SAAS,cAAc,gBAAgB,EAAE,YAAcG,EAAeF,CAAO,EAC7E,SAAS,cAAc,gBAAgB,EAAE,YAAcE,EAAeD,CAAO,CAChF,CACJ,CAED,SAASJ,EAAUM,EAAI,CAMnB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAC1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EACpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EACjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CACH,KAAMD,EAAeJ,CAAI,EACzB,MAAOI,EAAeH,CAAK,EAC3B,QAASG,EAAeF,CAAO,EAC/B,QAASE,EAAeD,CAAO,CAC3C,CACK,CAED,SAASC,EAAeE,EAAO,CAC3B,MAAMC,EAAcD,EAAM,WAC1B,OAAOC,EAAY,SAAW,EAAI,IAAIA,IAAgBA,CACzD,CACL,CAAC"}